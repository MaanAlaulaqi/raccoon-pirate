const k={help:"Commands: help, lore, sparkle, clear, joke, theme, man, version",lore:"A dusty bottle rolls by... It's damn empty, can't a guy catch a break round these parts?!",sparkle:"* ✨ sparkles ! wee ! ✨ *",clear:"__CLEAR__",version:"Raccoon Interpreter v0.7.11"},g={async joke(){return(await(await fetch("https://icanhazdadjoke.com/",{headers:{Accept:"application/json"}})).json()).joke},async theme(){const t=(document.documentElement.dataset.theme||"dark")==="dark"?"light":"dark";return document.documentElement.dataset.theme=t,localStorage.setItem("raccoonTheme",t),`Switched to ${t} theme.`},async man(){return`Manual Pages:

        - joke: Fetch a dad joke
        - help: List available commands
        - theme: Toggle light/dark mode
        - clear: Clear the terminal
        - version: Show current version
        
        Type a command name for more info: man <command>`},async"man joke"(){return"joke - Fetches a random dad joke from icanhazdadjoke.com API"},async"man theme"(){return"theme - Toggles between dark and light themes"}};function b(e){return k[e]||`Unknown command: ${e}`}function T(e){return g.hasOwnProperty(e)}async function L(e){var t;return(t=g[e])==null?void 0:t.call(g)}let s=!1,i=[],m=-1;function I(){return{visible:s,commandHistory:i,historyIndex:m}}function S(){return s=!s,s}function E(e){s=e}function M(e){i.push(e),m=i.length}function p(e){return i[e]||""}function v(e){return m=Math.max(0,Math.min(i.length,m+e)),m}function l(e,t){localStorage.setItem("raccoonTerminalVisible",s?"1":"0"),localStorage.setItem("raccoonTerminalOutput",e),localStorage.setItem("raccoonTerminalHistory",JSON.stringify(i)),t&&localStorage.setItem("terminalHeight",t)}function j(e,t){const r=localStorage.getItem("raccoonTerminalVisible"),c=localStorage.getItem("raccoonTerminalOutput"),d=localStorage.getItem("raccoonTerminalHistory"),u=localStorage.getItem("terminalHeight");s=r==="1",e.style.display=s?"block":"none",c&&(t.innerHTML=c),d&&(i=JSON.parse(d)),u&&(e.style.height=u)}document.documentElement.dataset.theme=localStorage.getItem("raccoonTheme")||"dark";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("raccoon-terminal"),t=document.getElementById("terminal-output"),r=document.getElementById("terminal-input"),c=document.getElementById("terminal-resize-handle"),d=n=>{const o=document.createElement("div");return o.innerText=n,o.innerText.trim()},u=async n=>{const o=d(n);if(M(o),k[o]==="__CLEAR__")t.innerHTML="raccoon@interperter:~$ ";else{if(t.innerHTML+=`<br>> ${o}`,T(o)){const a=await L(o);t.innerHTML+=`<br>${a}`}else{const a=b(o);t.innerHTML+=`<br>${a}`}t.innerHTML+="<br>raccoon@interperter:~$ "}t.scrollTop=t.scrollHeight,l(t.innerHTML,e.style.height)};let h=!1,y=0,f=0;c&&e&&(c.addEventListener("mousedown",n=>{h=!0,y=n.clientY,f=e.offsetHeight,document.body.style.userSelect="none"}),window.addEventListener("mousemove",n=>{if(!h)return;const o=n.clientY-y;let a=f-o;const H=window.innerHeight*.05,w=window.innerHeight*.9;a=Math.max(H,Math.min(w,a)),e.style.height=`${a}px`}),window.addEventListener("mouseup",()=>{h&&(h=!1,document.body.style.userSelect="",l(t.innerHTML,e.style.height))})),new ResizeObserver(n=>{for(let o of n)l(t.innerHTML,`${o.contentRect.height}px`)}).observe(e),window.addEventListener("keydown",n=>{const o=I();if(n.code==="Backquote"&&!n.shiftKey&&!n.ctrlKey&&!n.metaKey&&!n.altKey){n.preventDefault();const a=S();e.style.display=a?"block":"none",a&&(r==null||r.focus()),l(t.innerHTML,e.style.height)}if(n.code==="Escape"&&o.visible&&(E(!1),e.style.display="none",l(t.innerHTML,e.style.height)),o.visible&&n.target===r){if(n.key==="ArrowUp"){n.preventDefault();const a=v(-1);r.value=p(a)}if(n.key==="ArrowDown"){n.preventDefault();const a=v(1);r.value=p(a)}}}),r==null||r.addEventListener("keydown",n=>{n.key==="Enter"&&(u(r.value),r.value="")}),j(e,t)});
